<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Web.XML 配置详解</title>
</head>
<body>
<H2>web.xml 配置详解</H2>
<p>转自: <A href="http://blog.csdn.net/jupiter97/archive/2007/04/25/1584635.aspx" target=_blank>http://blog.csdn.net/jupiter97/archive/2007/04/25/1584635.aspx</A>

<DIV class=blogstory sizcache="0" sizset="13">
每一个站的WEB-INF下都有一个web.xml的设定文件，它提供了我们站台的配置设定. 
<P>web.xml定义：<BR>&nbsp;.站台的名称和说明<BR>&nbsp;.针对环境参数(Context)做初始化工作<BR>&nbsp;.Servlet的名称和映射<BR>&nbsp;.Session的设定<BR>&nbsp;.Tag library的对映<BR>&nbsp;.JSP网页设定<BR>&nbsp;.Mime Type处理<BR>&nbsp;.错误处理<BR>&nbsp;.利用JDNI取得站台资源</P>
<P>要了解web.xml的设定值，必须了解它的schema,从web.xml中知道它的schema是由Sum Microsystems公司定制的，如果你想更为详细的了解它，<BR>可以到<A href="http://java.sun.com/xml/ns/j2ee/web-mapp_2_4.xsd">http://java.sun.com/xml/ns/j2ee/web-mapp_2_4.xsd</A>网页，那里有更为详细的介绍。这里我介绍我们平常见得最都的.<BR>&nbsp; <BR>&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;</P>
<P>&lt;web-app xmlns="<A href="http://java.sun.com/xml/ns/j2ee">http://java.sun.com/xml/ns/j2ee</A>"<BR>&nbsp;&nbsp;&nbsp; xmlns:xsi="<A href="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</A>"<BR>&nbsp;&nbsp;&nbsp; xsi:schemaLocation="<A href="http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd</A>"<BR>&nbsp;&nbsp;&nbsp; version="2.4"&gt;<BR>&lt;web-app&gt;<BR>这是一般在写XML时所做的声明,定义了XML的版本，编码格式,还有重要的指明schema的来源,为<A href="http://java.sun.com/xml/ns/j2ee">http://java.sun.com/xml/ns/j2ee</A><BR>/web-app_2_4.xsd.</P>
<P><BR>&lt;description&gt;,&lt;display-name&gt;,&lt;icon&gt;<BR>____________________________________________</P>
<P>&lt;description&gt;站台描述&lt;/discription&gt;<BR>对站台做出描述.</P>
<P>&lt;display-name&gt;站台名称&lt;/display-name&gt;<BR>定义站台的名称.</P>
<P>&lt;icon&gt;<BR>icon元素包含small-icon和large-icon两个子元素.用来指定web站台中小图标和大图标的路径.<BR>&lt;small-icon&gt;/路径/smallicon.gif&lt;/small-icon&gt;<BR>small-icon元素应指向web站台中某个小图标的路径,大小为16 X 16 pixel,但是图象文件必须为GIF或JPEG格式,扩展名必须为:.gif或<BR>.jpg.</P>
<P>&lt;large-icon&gt;/路径/largeicon-jpg&lt;/large-icon&gt;<BR>large-icon元素应指向web站台中某个大图表路径,大小为32 X 32 pixel,但是图象文件必须为GIF或JPEG的格式,扩展名必须为; gif<BR>或jpg.<BR>范例:<BR>&lt;display-name&gt;Develop Example&lt;/display-name&gt;<BR>&lt;description&gt;JSP 2.0 Tech Book's Examples&lt;/description&gt;<BR>&lt;icon&gt;<BR>&nbsp;&nbsp; &lt;small-icon&gt;/images/small.gif&lt;/small-icon&gt;<BR>&nbsp;&nbsp; &lt;large-icon&gt;/images/large.gir&lt;/large-icon&gt;<BR>&lt;/icon&gt;</P>
<P><BR>&lt;distributable&gt;<BR>______________________________________</P>
<P>&lt;distributable&gt;<BR>distributable 元素为空标签,它的存在与否可以指定站台是否可分布式处理.如果web.xml中出现这个元素,则代表站台在开发时已经<BR>被设计为能在多个JSP Container 之间分散执行.<BR>范例:<BR>&lt;distributable/&gt;</P>
<P>&lt;context-param&gt;<BR>___________________________________</P>
<P>&lt;context-param&gt;<BR>context-param 元素用来设定web站台的环境参数(context),它包含两个子元素:<BR>param-name和param-value.<BR>&lt;param-name&gt;参数名称&lt;/param-name&gt;<BR>设定Context名称<BR>&lt;param-value&gt;值&lt;/param-value&gt;<BR>设定Context名称的值<BR>&lt;/context-param&gt;<BR>范例:<BR>&lt;context-param&gt;<BR>&nbsp;&nbsp; &lt;param-name&gt;param_name&lt;/param-name&gt;<BR>&nbsp;&nbsp; &lt;param-value&gt;param_value&lt;/param-value&gt;<BR>&lt;/context-param&gt;<BR>此所设定的参数,在JSP网页中可以使用下列方法来取得:<BR>${initParam.param_name}<BR>若在Servlet可以使用下列方法来获得:<BR>String param_name=getServletContext().getInitParamter("param_name");</P>
<P>&lt;filter&gt;<BR>_________________________________<BR>filter元素用来声明filter的相关设定.filter元素除了下面介绍的的子元素之外,还包括&lt;servlet&gt;介绍过的&lt;icon&gt;,&lt;display-name&gt;<BR>,&lt;description&gt;,&lt;init-param&gt;,其用途一样.<BR>&lt;filter-name&gt;Filter的名称&lt;/filter-name&gt;<BR>定义Filter的名称.<BR>&lt;filter-class&gt;Filter的类名称&lt;/filter-class&gt;<BR>定义Filter的类名称.例如:com.foo.hello<BR>&lt;/filter&gt;<BR>范例:<BR>&lt;filter&gt;<BR>&nbsp; &lt;filter-name&gt;setCharacterEncoding&lt;/filter-name&gt;<BR>&nbsp; &lt;filter-class&gt;coreservlet.javaworld.CH11.SetCharacterEncodingFilter&lt;/filter-class&gt;<BR>&nbsp; &lt;init-param&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp; &lt;param-name&gt;encoding&lt;/param-name&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp; &lt;param-value&gt;GB2312&lt;/param-value&gt;<BR>&nbsp; &lt;/init-param&gt;<BR>&lt;/filter&gt;</P>
<P><BR>&lt;filter-mapping&gt;<BR>______________________________________<BR>&lt;filter-mapping&gt;<BR>filter-mapping 元素的两个主要子元素filter-name和url-pattern.用来定义Filter所对应的URL.<BR>&lt;filter-name&gt;Filter的名称&lt;/filter-name&gt;<BR>定义Filter的名称.<BR>&lt;url-pattern&gt;URL&lt;/url-pattern&gt;<BR>Filter所对应的RUL.例如:&lt;url-pattern&gt;/Filter/Hello&lt;/url-pattern&gt;</P>
<P>&lt;servlet-name&gt;Servlet的名称&lt;servlet-name&gt;<BR>定义servlet的名称.<BR>&lt;dispatcher&gt;REQUEST|INCLUDE|FORWARD|ERROR&lt;/disaptcher&gt;<BR>设定Filter对应的请求方式,有RQUEST,INCLUDE,FORWAR,ERROR四种,默认为REQUEST.<BR>&lt;/filter-mapping&gt;<BR>范例:<BR>&lt;filter-mapping&gt;<BR>&nbsp;&nbsp; &lt;filter-name&gt;GZIPEncoding&lt;/filter-name&gt;<BR>&nbsp;&nbsp; &lt;url-pattern&gt;/*&lt;/url-pattern&gt;<BR>&lt;/filter-mapping&gt;</P>
<P>&lt;listener&gt;<BR>___________________________________________<BR>&lt;listener&gt;<BR>listener元素用来定义Listener接口,它的主要子元素为&lt;listener-class&gt;<BR>&lt;listen-class&gt;Listener的类名称&lt;/listener-class&gt;<BR>定义Listener的类名称.例如: com.foo.hello<BR>&lt;listener&gt;<BR>范例:<BR>&lt;listener&gt;<BR>&nbsp; &lt;listener-class&gt;coreservlet.javaworld.CH11.ContenxtListener&lt;/listener-class&gt;<BR>&lt;/listener&gt;</P>
<P>&lt;servlet-mapping&gt;<BR>_____________________________________________<BR>servlet-mapping元素包含两个子元素servlet-name和url-pattern.用来定义servlet所对应URL.<BR>&lt;servlet-name&gt;Servlet的名称&lt;/servlet-name&gt;<BR>定义Servlet的名称.<BR>&lt;url-pattern&gt;Servlet URL&lt;/url-pattern&gt;<BR>定义Servlet所对应的RUL.例如:&lt;url-pattern&gt;/Servlet/Hello&lt;/url-pattern&gt;<BR>&lt;/servlet-mapping&gt;<BR>范例:<BR>&lt;servlet-mapping&gt;<BR>&nbsp;&nbsp; &lt;servlet-name&gt;LoginChecker&lt;/servlet-name&gt;<BR>&nbsp;&nbsp; &lt;url-pattern&gt;/LoginChecker&lt;/url-pattern&gt;<BR>&lt;/servlet-mapping&gt;</P>
<P><BR>&lt;session-cofing&gt;<BR>__________________________________<BR>&lt;session-config&gt;<BR>session-config包含一个子元素session-timeout.定义web站台中的session参数.<BR>&lt;session-timeout&gt;分钟&lt;/session-timeout&gt;<BR>定义这个web站台所有session的有效期限.单位为分钟.<BR>&lt;/session-config&gt;<BR>范例:<BR>&lt;session-config&gt;<BR>&nbsp;&nbsp; &lt;session-timeout&gt;20&lt;/session-timeout&gt;<BR>&lt;/session-config&gt;</P>
<P><BR>&lt;mime-mapping&gt;<BR>___________________________________________________<BR>&lt;mima-mapping&gt;<BR>mime-mapping包含两个子元素extension和mime-type.定义某一个扩展名和某一MIME Type做对映.<BR>&lt;extension&gt;扩展名名称&lt;/extension&gt;<BR>扩展名称<BR>&lt;mime-type&gt;MIME格式&lt;/mime-type&gt;<BR>MIME格式.<BR>&lt;/mime-mapping&gt;<BR>范例:<BR>&lt;mime-mapping&gt;<BR>&nbsp;&nbsp; &lt;extension&gt;doc&lt;/extension&gt;<BR>&nbsp;&nbsp; &lt;mime-type&gt;application/vnd.ms-word&lt;/mime-type&gt;<BR>&lt;/mime-mapping&gt;<BR>&lt;mime-mapping&gt;<BR>&nbsp;&nbsp; &lt;extension&gt;xls&lt;/extension&gt;<BR>&nbsp;&nbsp; &lt;mime-type&gt;application/vnd.ms-excel&lt;/mime-type&gt;<BR>&lt;/mime-mapping&gt;<BR>&lt;mime-mapping&gt;<BR>&nbsp;&nbsp; &lt;extension&gt;ppt&lt;/extesnion&gt;<BR>&nbsp;&nbsp; &lt;mime-type&gt;application/vnd.ms-powerpoint&lt;/mime-type&gt;<BR>&lt;/mime-mapping&gt;</P>
<P><BR>&lt;welcome-file-list&gt;<BR>_____________________________________________<BR>&lt;welcome-file-list&gt;<BR>welcome-file-list包含一个子元素welcome-file.用来定义首页列单.<BR>&lt;welcome-file&gt;用来指定首页文件名称&lt;/welcome-flie&gt;<BR>welcome-file用来指定首页文件名称.我们可以用&lt;welcome-file&gt;指定几个首页,而服务器会依照设定的顺序来找首页.<BR>范例:<BR>&lt;welcome-file-list&gt;<BR>&nbsp; &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;<BR>&nbsp; &lt;welcome-file&gt;index.htm&lt;/welcome-file&gt;<BR>&lt;/welcome-file-list&gt;</P>
<P>&lt;error-page&gt;<BR>_________________________<BR>&lt;error-page&gt;<BR>error-page元素包含三个子元素error-code,exception-type和location.将错误代码(Error Code)或异常(Exception)的种类对应<BR>到web站台资源路径.<BR>&lt;error-code&gt;错误代码&lt;/error-code&gt;<BR>HTTP Error code,例如: 404<BR>&lt;exception-type&gt;Exception&lt;/exception-type&gt;<BR>一个完整名称的Java异常类型<BR>&lt;location&gt;/路径&lt;/location&gt;<BR>在web站台内的相关资源路径<BR>&lt;/error-page&gt;<BR>范例:<BR>&lt;error-page&gt;<BR>&nbsp;&nbsp; &lt;error-code&gt;404&lt;/error-code&gt;<BR>&nbsp;&nbsp; &lt;location&gt;/error404.jsp&lt;/location&gt;<BR>&lt;/error-page&gt;<BR>&lt;error-page&gt;<BR>&nbsp;&nbsp; &lt;exception-type&gt;java.lang.Exception&lt;/exception-type&gt;<BR>&nbsp;&nbsp; &lt;location&gt;/except.jsp&lt;/location&gt;<BR>&lt;/error-page&gt;</P>
<P>&lt;jsp-config&gt;<BR>_______________________________________________<BR>&lt;jsp-config&gt;<BR>jsp-config元素主要用来设定JSP的相关配置,&lt;jsp:config&gt;包括&lt;taglib&gt;和&lt;jsp-property-group&gt;两个子元素.其中&lt;taglib&gt;元素<BR>在JSP 1.2时就已经存在了;而&lt;jsp-property-group&gt;是JSP 2.0新增的元素.</P>
<P>&lt;taglib&gt;<BR>taglib元素包含两个子元素taglib-uri和taglib-location.用来设定JSP网页用到的Tag Library路径.<BR>&lt;taglib-uri&gt;URI&lt;/taglib-uri&gt;<BR>&nbsp;&nbsp; taglib-uri定义TLD文件的URI,JSP网页的taglib指令可以经由这个URI存取到TLD文件.<BR>&lt;taglib-location&gt;/WEB-INF/lib/xxx.tld&lt;/taglib-laction&gt;<BR>&nbsp;&nbsp; TLD文件对应Web站台的存放位置.<BR>&lt;/taglib&gt;</P>
<P>&lt;jsp-property-group&gt;<BR>jsp-property-group元素包含8个元素,分别为:<BR>&lt;description&gt;Description&lt;/descrition&gt;<BR>此设定的说明</P>
<P>&lt;display-name&gt;Name&lt;/display-name&gt;<BR>此设定的名称</P>
<P>&lt;url-pattern&gt;URL&lt;/url-pattern&gt;<BR>设定值所影响的范围,如:/CH2 或者/*.jsp</P>
<P>&lt;el-ignored&gt;true|false&lt;/el-ignored&gt;<BR>若为true,表示不支持EL语法.</P>
<P>&lt;scripting-invalid&gt;true|false&lt;/scripting-invalid&gt;<BR>若为true表示不支持&lt;%scription%&gt;语法.</P>
<P>&lt;page-encoding&gt;encoding&lt;/page-encoding&gt;<BR>设定JSP网页的编码</P>
<P>&lt;include-prelude&gt;.jspf&lt;/include-prelude&gt;<BR>设置JSP网页的抬头,扩展名为.jspf</P>
<P>&lt;include-coda&gt;.jspf&lt;/include-coda&gt;<BR>设置JSP网页的结尾,扩展名为.jspf<BR>&lt;/jsp-property-group&gt;<BR>&lt;/jsp-config&gt;<BR>范例:<BR>&lt;jsp-config&gt;<BR>&lt;taglib&gt;<BR>&nbsp;&nbsp; &lt;taglib-uri&gt;Taglib&lt;/taglib-uri&gt;<BR>&nbsp;&nbsp; &lt;taglib-location&gt;/WEB-INF/tlds/MyTaglib.tld&lt;/taglib-location&gt;<BR>&lt;/taglib&gt;<BR>&lt;jsp-property-group&gt;<BR>&nbsp;&nbsp; &lt;description&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Special property group for JSP Configuration JSP example.<BR>&nbsp;&nbsp; &lt;/description&gt;<BR>&nbsp;&nbsp; &lt;display-name&gt;JSPConfiguration&lt;/display-name&gt;<BR>&nbsp;&nbsp; &lt;uri-pattern&gt;/*&lt;/uri-pattern&gt;<BR>&nbsp;&nbsp; &lt;el-ignored&gt;true&lt;/el-ignored&gt;<BR>&nbsp;&nbsp; &lt;page-encoding&gt;GB2312&lt;/page-encoding&gt;<BR>&nbsp;&nbsp; &lt;scripting-inivalid&gt;true&lt;/scripting-inivalid&gt;<BR>&nbsp;&nbsp; ............<BR>&lt;/jsp-property-group&gt;<BR>&lt;/jsp-config&gt;</P>
<P>&lt;resource-ref&gt;<BR>________________________________________________<BR>&lt;resource-ref&gt;<BR>resource-ref元素包括五个子元素description,res-ref-name,res-type,res-auth,res-sharing-scope.利用JNDI取得站台可<BR>利用资源.<BR>&lt;description&gt;说明&lt;/description&gt;<BR>资源说明</P>
<P>&lt;rec-ref-name&gt;资源名称&lt;/rec-ref-name&gt;<BR>资源名称</P>
<P>&lt;res-type&gt;资源种类&lt;/res-type&gt;<BR>资源种类</P>
<P>&lt;res-auth&gt;Application|Container&lt;/res-auth&gt;<BR>资源由Application或Container来许可</P>
<P>&lt;res-sharing-scope&gt;Shareable|Unshareable&lt;/res-sharing-scope&gt;<BR>&nbsp;资源是否可以共享.默认值为 Shareable<BR>范例:<BR>&lt;resource-ref&gt;<BR>&nbsp;&nbsp; &lt;description&gt;JNDI JDBC DataSource of JSPBook&lt;/description&gt;<BR>&nbsp;&nbsp; &lt;res-ref-name&gt;jdbc/sample_db&lt;/res-ref-name&gt;<BR>&nbsp;&nbsp; &lt;res-type&gt;javax.sql.DataSoruce&lt;/res-type&gt;<BR>&nbsp;&nbsp; &lt;res-auth&gt;Container&lt;/res-auth&gt;<BR>&lt;/resource-ref&gt;</P>
<P>这些都是些比较常用的,详细可以登录: <A href="http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd</A><BR>&nbsp;</P>
</DIV>
</body>
</html>